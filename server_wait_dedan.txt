#DEFINE N 2

server: r1(agents A[N]:A; servers ProcessFirst, ProcessSecond, r2),
services {
    CALL_Act_FROM_ProcessFirst,
    EXEC_SI64EI70SL4SC8EL4EC14_FROM_ProcessFirst,
    EXEC_SI102EI112SL6SC8EL6EC18_FROM_ProcessFirst,
    EXEC_SI80EI92SL5SC8EL5EC20_FROM_ProcessFirst
},
states {
    x_0,
    x_0_FROM_ProcessFirst_PRE_SI64EI70SL4SC8EL4EC14,
    x_1_FROM_ProcessFirst_PRE_SI80EI92SL5SC8EL5EC20,
    x_1_FROM_ProcessFirst_PRE_SI102EI112SL6SC8EL6EC18,
    x_1,
    x_1_FROM_ProcessFirst_PRE_SI64EI70SL4SC8EL4EC14,
    x_2_FROM_ProcessFirst_PRE_SI80EI92SL5SC8EL5EC20,
    x_2_FROM_ProcessFirst_PRE_SI102EI112SL6SC8EL6EC18,
    x_2
},
actions {
    <j=1..N>{A[j].r1.CALL_Act_FROM_ProcessFirst, r1.x_0} -> {A[j].r1.EXEC_SI64EI70SL4SC8EL4EC14_FROM_ProcessFirst, r1.x_0_FROM_ProcessFirst_PRE_SI64EI70SL4SC8EL4EC14},
    <j=1..N>{A[j].r1.EXEC_SI64EI70SL4SC8EL4EC14_FROM_ProcessFirst, r1.x_0_FROM_ProcessFirst_PRE_SI64EI70SL4SC8EL4EC14} -> {A[j].r1.EXEC_SI80EI92SL5SC8EL5EC20_FROM_ProcessFirst, r1.x_1_FROM_ProcessFirst_PRE_SI80EI92SL5SC8EL5EC20},
    <j=1..N>{A[j].r1.EXEC_SI102EI112SL6SC8EL6EC18_FROM_ProcessFirst, r1.x_1_FROM_ProcessFirst_PRE_SI102EI112SL6SC8EL6EC18} -> {A[j].ProcessFirst.RETURN_ok, r1.x_1},
    <j=1..N>{A[j].r1.CALL_Act_FROM_ProcessFirst, r1.x_1} -> {A[j].r1.EXEC_SI64EI70SL4SC8EL4EC14_FROM_ProcessFirst, r1.x_1_FROM_ProcessFirst_PRE_SI64EI70SL4SC8EL4EC14},
    <j=1..N>{A[j].r1.EXEC_SI64EI70SL4SC8EL4EC14_FROM_ProcessFirst, r1.x_1_FROM_ProcessFirst_PRE_SI64EI70SL4SC8EL4EC14} -> {A[j].r1.EXEC_SI80EI92SL5SC8EL5EC20_FROM_ProcessFirst, r1.x_2_FROM_ProcessFirst_PRE_SI80EI92SL5SC8EL5EC20},
    <j=1..N>{A[j].r1.EXEC_SI80EI92SL5SC8EL5EC20_FROM_ProcessFirst, r1.x_2_FROM_ProcessFirst_PRE_SI80EI92SL5SC8EL5EC20} -> {A[j].r1.EXEC_SI102EI112SL6SC8EL6EC18_FROM_ProcessFirst, r1.x_2_FROM_ProcessFirst_PRE_SI102EI112SL6SC8EL6EC18},
    <j=1..N>{A[j].r1.EXEC_SI102EI112SL6SC8EL6EC18_FROM_ProcessFirst, r1.x_2_FROM_ProcessFirst_PRE_SI102EI112SL6SC8EL6EC18} -> {A[j].ProcessFirst.RETURN_ok, r1.x_2}
};

server: r2(agents A[N]:A; servers ProcessFirst, ProcessSecond, r1),
services {
    CALL_Act_FROM_ProcessSecond,
    EXEC_SI64EI70SL4SC8EL4EC14_FROM_ProcessSecond,
    EXEC_SI102EI112SL6SC8EL6EC18_FROM_ProcessSecond,
    EXEC_SI80EI92SL5SC8EL5EC20_FROM_ProcessSecond
},
states {
    x_1,
    x_0,
    x_0_FROM_ProcessSecond_PRE_SI64EI70SL4SC8EL4EC14,
    x_1_FROM_ProcessSecond_PRE_SI80EI92SL5SC8EL5EC20,
    x_1_FROM_ProcessSecond_PRE_SI102EI112SL6SC8EL6EC18,
    x_1_FROM_ProcessSecond_PRE_SI64EI70SL4SC8EL4EC14,
    x_2_FROM_ProcessSecond_PRE_SI80EI92SL5SC8EL5EC20,
    x_2_FROM_ProcessSecond_PRE_SI102EI112SL6SC8EL6EC18,
    x_2
},
actions {
    <j=1..N>{A[j].r2.CALL_Act_FROM_ProcessSecond, r2.x_0} -> {A[j].r2.EXEC_SI64EI70SL4SC8EL4EC14_FROM_ProcessSecond, r2.x_0_FROM_ProcessSecond_PRE_SI64EI70SL4SC8EL4EC14},
    <j=1..N>{A[j].r2.EXEC_SI64EI70SL4SC8EL4EC14_FROM_ProcessSecond, r2.x_0_FROM_ProcessSecond_PRE_SI64EI70SL4SC8EL4EC14} -> {A[j].r2.EXEC_SI80EI92SL5SC8EL5EC20_FROM_ProcessSecond, r2.x_1_FROM_ProcessSecond_PRE_SI80EI92SL5SC8EL5EC20},
    <j=1..N>{A[j].r2.EXEC_SI102EI112SL6SC8EL6EC18_FROM_ProcessSecond, r2.x_1_FROM_ProcessSecond_PRE_SI102EI112SL6SC8EL6EC18} -> {A[j].ProcessSecond.RETURN_ok, r2.x_1},
    <j=1..N>{A[j].r2.CALL_Act_FROM_ProcessSecond, r2.x_1} -> {A[j].r2.EXEC_SI64EI70SL4SC8EL4EC14_FROM_ProcessSecond, r2.x_1_FROM_ProcessSecond_PRE_SI64EI70SL4SC8EL4EC14},
    <j=1..N>{A[j].r2.EXEC_SI64EI70SL4SC8EL4EC14_FROM_ProcessSecond, r2.x_1_FROM_ProcessSecond_PRE_SI64EI70SL4SC8EL4EC14} -> {A[j].r2.EXEC_SI80EI92SL5SC8EL5EC20_FROM_ProcessSecond, r2.x_2_FROM_ProcessSecond_PRE_SI80EI92SL5SC8EL5EC20},
    <j=1..N>{A[j].r2.EXEC_SI80EI92SL5SC8EL5EC20_FROM_ProcessSecond, r2.x_2_FROM_ProcessSecond_PRE_SI80EI92SL5SC8EL5EC20} -> {A[j].r2.EXEC_SI102EI112SL6SC8EL6EC18_FROM_ProcessSecond, r2.x_2_FROM_ProcessSecond_PRE_SI102EI112SL6SC8EL6EC18},
    <j=1..N>{A[j].r2.EXEC_SI102EI112SL6SC8EL6EC18_FROM_ProcessSecond, r2.x_2_FROM_ProcessSecond_PRE_SI102EI112SL6SC8EL6EC18} -> {A[j].ProcessSecond.RETURN_ok, r2.x_2}
};

server: ProcessFirst(agents A[N]:A; servers ProcessSecond, r1, r2),
services {
    START_FROM_INIT,
    EXEC_SI196EI204SL14SC4EL14EC12_FROM_INIT,
    RETURN_ok,
    EXEC_SI210EI219SL15SC4EL15EC13_FROM_INIT,
    TERMINATE_EXIT
},
states {
    NONE,
    NONE_FROM_INIT_PRE_SI196EI204SL14SC4EL14EC12,
    NONE_FROM_INIT_AT_SI196EI204SL14SC4EL14EC12,
    NONE_FROM_INIT_PRE_SI210EI219SL15SC4EL15EC13
},
actions {
    {A[1].ProcessFirst.START_FROM_INIT, ProcessFirst.NONE} -> {A[1].ProcessFirst.EXEC_SI196EI204SL14SC4EL14EC12_FROM_INIT, ProcessFirst.NONE_FROM_INIT_PRE_SI196EI204SL14SC4EL14EC12},
    {A[1].ProcessFirst.EXEC_SI196EI204SL14SC4EL14EC12_FROM_INIT, ProcessFirst.NONE_FROM_INIT_PRE_SI196EI204SL14SC4EL14EC12} -> {A[1].r1.CALL_Act_FROM_ProcessFirst, ProcessFirst.NONE_FROM_INIT_AT_SI196EI204SL14SC4EL14EC12},
    {A[1].ProcessFirst.RETURN_ok, ProcessFirst.NONE_FROM_INIT_AT_SI196EI204SL14SC4EL14EC12} -> {A[1].ProcessFirst.EXEC_SI210EI219SL15SC4EL15EC13_FROM_INIT, ProcessFirst.NONE_FROM_INIT_PRE_SI210EI219SL15SC4EL15EC13},
    {A[1].ProcessFirst.EXEC_SI210EI219SL15SC4EL15EC13_FROM_INIT, ProcessFirst.NONE_FROM_INIT_PRE_SI210EI219SL15SC4EL15EC13} -> {A[1].ProcessFirst.TERMINATE_EXIT, ProcessFirst.NONE},
    {A[1].ProcessFirst.TERMINATE_EXIT, ProcessFirst.NONE} -> {ProcessFirst.NONE}
};

server: ProcessSecond(agents A[N]:A; servers ProcessFirst, r1, r2),
services {
    START_FROM_INIT,
    EXEC_SI245EI253SL19SC4EL19EC12_FROM_INIT,
    RETURN_ok,
    EXEC_SI259EI268SL20SC4EL20EC13_FROM_INIT,
    TERMINATE_EXIT
},
states {
    NONE,
    NONE_FROM_INIT_PRE_SI245EI253SL19SC4EL19EC12,
    NONE_FROM_INIT_AT_SI245EI253SL19SC4EL19EC12,
    NONE_FROM_INIT_PRE_SI259EI268SL20SC4EL20EC13
},
actions {
    {A[2].ProcessSecond.START_FROM_INIT, ProcessSecond.NONE} -> {A[2].ProcessSecond.EXEC_SI245EI253SL19SC4EL19EC12_FROM_INIT, ProcessSecond.NONE_FROM_INIT_PRE_SI245EI253SL19SC4EL19EC12},
    {A[2].ProcessSecond.EXEC_SI245EI253SL19SC4EL19EC12_FROM_INIT, ProcessSecond.NONE_FROM_INIT_PRE_SI245EI253SL19SC4EL19EC12} -> {A[2].r2.CALL_Act_FROM_ProcessSecond, ProcessSecond.NONE_FROM_INIT_AT_SI245EI253SL19SC4EL19EC12},
    {A[2].ProcessSecond.RETURN_ok, ProcessSecond.NONE_FROM_INIT_AT_SI245EI253SL19SC4EL19EC12} -> {A[2].ProcessSecond.EXEC_SI259EI268SL20SC4EL20EC13_FROM_INIT, ProcessSecond.NONE_FROM_INIT_PRE_SI259EI268SL20SC4EL20EC13},
    {A[2].ProcessSecond.EXEC_SI259EI268SL20SC4EL20EC13_FROM_INIT, ProcessSecond.NONE_FROM_INIT_PRE_SI259EI268SL20SC4EL20EC13} -> {A[2].ProcessSecond.TERMINATE_EXIT, ProcessSecond.NONE},
    {A[2].ProcessSecond.TERMINATE_EXIT, ProcessSecond.NONE} -> {ProcessSecond.NONE}
};

agents First, Second;
servers r1, r2, ProcessFirst, ProcessSecond;

init -> {
    r1(First, Second, ProcessFirst, ProcessSecond, r2).x_0,
    r2(First, Second, ProcessFirst, ProcessSecond, r1).x_1,
    ProcessFirst(First, Second, ProcessSecond, r1, r2).NONE,
    ProcessSecond(First, Second, ProcessFirst, r1, r2).NONE,

    First.ProcessFirst.START_FROM_INIT,
    Second.ProcessSecond.START_FROM_INIT,
}.