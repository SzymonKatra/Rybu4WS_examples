#DEFINE N 2

server: r1(agents A[N]:A; servers ProcessFirst, ProcessSecond, r2),
services {
    CALL_Act_FROM_ProcessFirst,
    EXEC_SI64EI70SL4SC8EL4EC14_FROM_ProcessFirst,
    EXEC_SI106EI112SL6SC12EL6EC18_FROM_ProcessFirst,
    PROCEED_SI112EI112SL6SC18EL6EC18_FROM_ProcessFirst,
    EXEC_SI80EI90SL5SC8EL5EC18_FROM_ProcessFirst,
    EXEC_SI132EI142SL8SC8EL8EC18_FROM_ProcessFirst
},
states {
    x_0,
    x_0_FROM_ProcessFirst_PRE_SI64EI70SL4SC8EL4EC14,
    x_1_FROM_ProcessFirst_PRE_SI80EI90SL5SC8EL5EC18,
    x_1_FROM_ProcessFirst_PRE_SI106EI112SL6SC12EL6EC18,
    x_2_FROM_ProcessFirst_AT_SI106EI112SL6SC12EL6EC18,
    x_2_FROM_ProcessFirst_PRE_SI132EI142SL8SC8EL8EC18,
    x_1_FROM_ProcessFirst_PRE_SI132EI142SL8SC8EL8EC18,
    x_2,
    x_1,
    x_1_FROM_ProcessFirst_PRE_SI64EI70SL4SC8EL4EC14,
    x_2_FROM_ProcessFirst_PRE_SI80EI90SL5SC8EL5EC18,
    x_2_FROM_ProcessFirst_PRE_SI106EI112SL6SC12EL6EC18,
    x_3_FROM_ProcessFirst_AT_SI106EI112SL6SC12EL6EC18,
    x_3_FROM_ProcessFirst_PRE_SI132EI142SL8SC8EL8EC18,
    x_3
},
actions {
    <j=1..N>{A[j].r1.CALL_Act_FROM_ProcessFirst, r1.x_0} -> {A[j].r1.EXEC_SI64EI70SL4SC8EL4EC14_FROM_ProcessFirst, r1.x_0_FROM_ProcessFirst_PRE_SI64EI70SL4SC8EL4EC14},
    <j=1..N>{A[j].r1.EXEC_SI64EI70SL4SC8EL4EC14_FROM_ProcessFirst, r1.x_0_FROM_ProcessFirst_PRE_SI64EI70SL4SC8EL4EC14} -> {A[j].r1.EXEC_SI80EI90SL5SC8EL5EC18_FROM_ProcessFirst, r1.x_1_FROM_ProcessFirst_PRE_SI80EI90SL5SC8EL5EC18},
    <j=1..N>{A[j].r1.EXEC_SI106EI112SL6SC12EL6EC18_FROM_ProcessFirst, r1.x_1_FROM_ProcessFirst_PRE_SI106EI112SL6SC12EL6EC18} -> {A[j].r1.PROCEED_SI112EI112SL6SC18EL6EC18_FROM_ProcessFirst, r1.x_2_FROM_ProcessFirst_AT_SI106EI112SL6SC12EL6EC18},
    <j=1..N>{A[j].r1.PROCEED_SI112EI112SL6SC18EL6EC18_FROM_ProcessFirst, r1.x_2_FROM_ProcessFirst_AT_SI106EI112SL6SC12EL6EC18} -> {A[j].r1.EXEC_SI132EI142SL8SC8EL8EC18_FROM_ProcessFirst, r1.x_2_FROM_ProcessFirst_PRE_SI132EI142SL8SC8EL8EC18},
    <j=1..N>{A[j].r1.EXEC_SI80EI90SL5SC8EL5EC18_FROM_ProcessFirst, r1.x_1_FROM_ProcessFirst_PRE_SI80EI90SL5SC8EL5EC18} -> {A[j].r1.EXEC_SI132EI142SL8SC8EL8EC18_FROM_ProcessFirst, r1.x_1_FROM_ProcessFirst_PRE_SI132EI142SL8SC8EL8EC18},
    <j=1..N>{A[j].r1.EXEC_SI132EI142SL8SC8EL8EC18_FROM_ProcessFirst, r1.x_2_FROM_ProcessFirst_PRE_SI132EI142SL8SC8EL8EC18} -> {A[j].ProcessFirst.RETURN_ok, r1.x_2},
    <j=1..N>{A[j].r1.EXEC_SI132EI142SL8SC8EL8EC18_FROM_ProcessFirst, r1.x_1_FROM_ProcessFirst_PRE_SI132EI142SL8SC8EL8EC18} -> {A[j].ProcessFirst.RETURN_ok, r1.x_1},
    <j=1..N>{A[j].r1.CALL_Act_FROM_ProcessFirst, r1.x_1} -> {A[j].r1.EXEC_SI64EI70SL4SC8EL4EC14_FROM_ProcessFirst, r1.x_1_FROM_ProcessFirst_PRE_SI64EI70SL4SC8EL4EC14},
    <j=1..N>{A[j].r1.EXEC_SI64EI70SL4SC8EL4EC14_FROM_ProcessFirst, r1.x_1_FROM_ProcessFirst_PRE_SI64EI70SL4SC8EL4EC14} -> {A[j].r1.EXEC_SI80EI90SL5SC8EL5EC18_FROM_ProcessFirst, r1.x_2_FROM_ProcessFirst_PRE_SI80EI90SL5SC8EL5EC18},
    <j=1..N>{A[j].r1.EXEC_SI80EI90SL5SC8EL5EC18_FROM_ProcessFirst, r1.x_2_FROM_ProcessFirst_PRE_SI80EI90SL5SC8EL5EC18} -> {A[j].r1.EXEC_SI106EI112SL6SC12EL6EC18_FROM_ProcessFirst, r1.x_2_FROM_ProcessFirst_PRE_SI106EI112SL6SC12EL6EC18},
    <j=1..N>{A[j].r1.EXEC_SI106EI112SL6SC12EL6EC18_FROM_ProcessFirst, r1.x_2_FROM_ProcessFirst_PRE_SI106EI112SL6SC12EL6EC18} -> {A[j].r1.PROCEED_SI112EI112SL6SC18EL6EC18_FROM_ProcessFirst, r1.x_3_FROM_ProcessFirst_AT_SI106EI112SL6SC12EL6EC18},
    <j=1..N>{A[j].r1.PROCEED_SI112EI112SL6SC18EL6EC18_FROM_ProcessFirst, r1.x_3_FROM_ProcessFirst_AT_SI106EI112SL6SC12EL6EC18} -> {A[j].r1.EXEC_SI132EI142SL8SC8EL8EC18_FROM_ProcessFirst, r1.x_3_FROM_ProcessFirst_PRE_SI132EI142SL8SC8EL8EC18},
    <j=1..N>{A[j].r1.EXEC_SI132EI142SL8SC8EL8EC18_FROM_ProcessFirst, r1.x_3_FROM_ProcessFirst_PRE_SI132EI142SL8SC8EL8EC18} -> {A[j].ProcessFirst.RETURN_ok, r1.x_3}
};

server: r2(agents A[N]:A; servers ProcessFirst, ProcessSecond, r1),
services {
    CALL_Act_FROM_ProcessSecond,
    EXEC_SI64EI70SL4SC8EL4EC14_FROM_ProcessSecond,
    EXEC_SI106EI112SL6SC12EL6EC18_FROM_ProcessSecond,
    PROCEED_SI112EI112SL6SC18EL6EC18_FROM_ProcessSecond,
    EXEC_SI80EI90SL5SC8EL5EC18_FROM_ProcessSecond,
    EXEC_SI132EI142SL8SC8EL8EC18_FROM_ProcessSecond
},
states {
    x_1,
    x_0,
    x_0_FROM_ProcessSecond_PRE_SI64EI70SL4SC8EL4EC14,
    x_1_FROM_ProcessSecond_PRE_SI80EI90SL5SC8EL5EC18,
    x_1_FROM_ProcessSecond_PRE_SI106EI112SL6SC12EL6EC18,
    x_2_FROM_ProcessSecond_AT_SI106EI112SL6SC12EL6EC18,
    x_2_FROM_ProcessSecond_PRE_SI132EI142SL8SC8EL8EC18,
    x_1_FROM_ProcessSecond_PRE_SI132EI142SL8SC8EL8EC18,
    x_2,
    x_1_FROM_ProcessSecond_PRE_SI64EI70SL4SC8EL4EC14,
    x_2_FROM_ProcessSecond_PRE_SI80EI90SL5SC8EL5EC18,
    x_2_FROM_ProcessSecond_PRE_SI106EI112SL6SC12EL6EC18,
    x_3_FROM_ProcessSecond_AT_SI106EI112SL6SC12EL6EC18,
    x_3_FROM_ProcessSecond_PRE_SI132EI142SL8SC8EL8EC18,
    x_3
},
actions {
    <j=1..N>{A[j].r2.CALL_Act_FROM_ProcessSecond, r2.x_0} -> {A[j].r2.EXEC_SI64EI70SL4SC8EL4EC14_FROM_ProcessSecond, r2.x_0_FROM_ProcessSecond_PRE_SI64EI70SL4SC8EL4EC14},
    <j=1..N>{A[j].r2.EXEC_SI64EI70SL4SC8EL4EC14_FROM_ProcessSecond, r2.x_0_FROM_ProcessSecond_PRE_SI64EI70SL4SC8EL4EC14} -> {A[j].r2.EXEC_SI80EI90SL5SC8EL5EC18_FROM_ProcessSecond, r2.x_1_FROM_ProcessSecond_PRE_SI80EI90SL5SC8EL5EC18},
    <j=1..N>{A[j].r2.EXEC_SI106EI112SL6SC12EL6EC18_FROM_ProcessSecond, r2.x_1_FROM_ProcessSecond_PRE_SI106EI112SL6SC12EL6EC18} -> {A[j].r2.PROCEED_SI112EI112SL6SC18EL6EC18_FROM_ProcessSecond, r2.x_2_FROM_ProcessSecond_AT_SI106EI112SL6SC12EL6EC18},
    <j=1..N>{A[j].r2.PROCEED_SI112EI112SL6SC18EL6EC18_FROM_ProcessSecond, r2.x_2_FROM_ProcessSecond_AT_SI106EI112SL6SC12EL6EC18} -> {A[j].r2.EXEC_SI132EI142SL8SC8EL8EC18_FROM_ProcessSecond, r2.x_2_FROM_ProcessSecond_PRE_SI132EI142SL8SC8EL8EC18},
    <j=1..N>{A[j].r2.EXEC_SI80EI90SL5SC8EL5EC18_FROM_ProcessSecond, r2.x_1_FROM_ProcessSecond_PRE_SI80EI90SL5SC8EL5EC18} -> {A[j].r2.EXEC_SI132EI142SL8SC8EL8EC18_FROM_ProcessSecond, r2.x_1_FROM_ProcessSecond_PRE_SI132EI142SL8SC8EL8EC18},
    <j=1..N>{A[j].r2.EXEC_SI132EI142SL8SC8EL8EC18_FROM_ProcessSecond, r2.x_2_FROM_ProcessSecond_PRE_SI132EI142SL8SC8EL8EC18} -> {A[j].ProcessSecond.RETURN_ok, r2.x_2},
    <j=1..N>{A[j].r2.EXEC_SI132EI142SL8SC8EL8EC18_FROM_ProcessSecond, r2.x_1_FROM_ProcessSecond_PRE_SI132EI142SL8SC8EL8EC18} -> {A[j].ProcessSecond.RETURN_ok, r2.x_1},
    <j=1..N>{A[j].r2.CALL_Act_FROM_ProcessSecond, r2.x_1} -> {A[j].r2.EXEC_SI64EI70SL4SC8EL4EC14_FROM_ProcessSecond, r2.x_1_FROM_ProcessSecond_PRE_SI64EI70SL4SC8EL4EC14},
    <j=1..N>{A[j].r2.EXEC_SI64EI70SL4SC8EL4EC14_FROM_ProcessSecond, r2.x_1_FROM_ProcessSecond_PRE_SI64EI70SL4SC8EL4EC14} -> {A[j].r2.EXEC_SI80EI90SL5SC8EL5EC18_FROM_ProcessSecond, r2.x_2_FROM_ProcessSecond_PRE_SI80EI90SL5SC8EL5EC18},
    <j=1..N>{A[j].r2.EXEC_SI80EI90SL5SC8EL5EC18_FROM_ProcessSecond, r2.x_2_FROM_ProcessSecond_PRE_SI80EI90SL5SC8EL5EC18} -> {A[j].r2.EXEC_SI106EI112SL6SC12EL6EC18_FROM_ProcessSecond, r2.x_2_FROM_ProcessSecond_PRE_SI106EI112SL6SC12EL6EC18},
    <j=1..N>{A[j].r2.EXEC_SI106EI112SL6SC12EL6EC18_FROM_ProcessSecond, r2.x_2_FROM_ProcessSecond_PRE_SI106EI112SL6SC12EL6EC18} -> {A[j].r2.PROCEED_SI112EI112SL6SC18EL6EC18_FROM_ProcessSecond, r2.x_3_FROM_ProcessSecond_AT_SI106EI112SL6SC12EL6EC18},
    <j=1..N>{A[j].r2.PROCEED_SI112EI112SL6SC18EL6EC18_FROM_ProcessSecond, r2.x_3_FROM_ProcessSecond_AT_SI106EI112SL6SC12EL6EC18} -> {A[j].r2.EXEC_SI132EI142SL8SC8EL8EC18_FROM_ProcessSecond, r2.x_3_FROM_ProcessSecond_PRE_SI132EI142SL8SC8EL8EC18},
    <j=1..N>{A[j].r2.EXEC_SI132EI142SL8SC8EL8EC18_FROM_ProcessSecond, r2.x_3_FROM_ProcessSecond_PRE_SI132EI142SL8SC8EL8EC18} -> {A[j].ProcessSecond.RETURN_ok, r2.x_3}
};

server: ProcessFirst(agents A[N]:A; servers ProcessSecond, r1, r2),
services {
    START_FROM_INIT,
    EXEC_SI226EI234SL16SC4EL16EC12_FROM_INIT,
    RETURN_ok,
    EXEC_SI240EI249SL17SC4EL17EC13_FROM_INIT,
    TERMINATE_EXIT
},
states {
    NONE,
    NONE_FROM_INIT_PRE_SI226EI234SL16SC4EL16EC12,
    NONE_FROM_INIT_AT_SI226EI234SL16SC4EL16EC12,
    NONE_FROM_INIT_PRE_SI240EI249SL17SC4EL17EC13
},
actions {
    {A[1].ProcessFirst.START_FROM_INIT, ProcessFirst.NONE} -> {A[1].ProcessFirst.EXEC_SI226EI234SL16SC4EL16EC12_FROM_INIT, ProcessFirst.NONE_FROM_INIT_PRE_SI226EI234SL16SC4EL16EC12},
    {A[1].ProcessFirst.EXEC_SI226EI234SL16SC4EL16EC12_FROM_INIT, ProcessFirst.NONE_FROM_INIT_PRE_SI226EI234SL16SC4EL16EC12} -> {A[1].r1.CALL_Act_FROM_ProcessFirst, ProcessFirst.NONE_FROM_INIT_AT_SI226EI234SL16SC4EL16EC12},
    {A[1].ProcessFirst.RETURN_ok, ProcessFirst.NONE_FROM_INIT_AT_SI226EI234SL16SC4EL16EC12} -> {A[1].ProcessFirst.EXEC_SI240EI249SL17SC4EL17EC13_FROM_INIT, ProcessFirst.NONE_FROM_INIT_PRE_SI240EI249SL17SC4EL17EC13},
    {A[1].ProcessFirst.EXEC_SI240EI249SL17SC4EL17EC13_FROM_INIT, ProcessFirst.NONE_FROM_INIT_PRE_SI240EI249SL17SC4EL17EC13} -> {A[1].ProcessFirst.TERMINATE_EXIT, ProcessFirst.NONE},
    {A[1].ProcessFirst.TERMINATE_EXIT, ProcessFirst.NONE} -> {ProcessFirst.NONE}
};

server: ProcessSecond(agents A[N]:A; servers ProcessFirst, r1, r2),
services {
    START_FROM_INIT,
    EXEC_SI275EI283SL21SC4EL21EC12_FROM_INIT,
    RETURN_ok,
    EXEC_SI289EI298SL22SC4EL22EC13_FROM_INIT,
    TERMINATE_EXIT
},
states {
    NONE,
    NONE_FROM_INIT_PRE_SI275EI283SL21SC4EL21EC12,
    NONE_FROM_INIT_AT_SI275EI283SL21SC4EL21EC12,
    NONE_FROM_INIT_PRE_SI289EI298SL22SC4EL22EC13
},
actions {
    {A[2].ProcessSecond.START_FROM_INIT, ProcessSecond.NONE} -> {A[2].ProcessSecond.EXEC_SI275EI283SL21SC4EL21EC12_FROM_INIT, ProcessSecond.NONE_FROM_INIT_PRE_SI275EI283SL21SC4EL21EC12},
    {A[2].ProcessSecond.EXEC_SI275EI283SL21SC4EL21EC12_FROM_INIT, ProcessSecond.NONE_FROM_INIT_PRE_SI275EI283SL21SC4EL21EC12} -> {A[2].r2.CALL_Act_FROM_ProcessSecond, ProcessSecond.NONE_FROM_INIT_AT_SI275EI283SL21SC4EL21EC12},
    {A[2].ProcessSecond.RETURN_ok, ProcessSecond.NONE_FROM_INIT_AT_SI275EI283SL21SC4EL21EC12} -> {A[2].ProcessSecond.EXEC_SI289EI298SL22SC4EL22EC13_FROM_INIT, ProcessSecond.NONE_FROM_INIT_PRE_SI289EI298SL22SC4EL22EC13},
    {A[2].ProcessSecond.EXEC_SI289EI298SL22SC4EL22EC13_FROM_INIT, ProcessSecond.NONE_FROM_INIT_PRE_SI289EI298SL22SC4EL22EC13} -> {A[2].ProcessSecond.TERMINATE_EXIT, ProcessSecond.NONE},
    {A[2].ProcessSecond.TERMINATE_EXIT, ProcessSecond.NONE} -> {ProcessSecond.NONE}
};

agents First, Second;
servers r1, r2, ProcessFirst, ProcessSecond;

init -> {
    r1(First, Second, ProcessFirst, ProcessSecond, r2).x_0,
    r2(First, Second, ProcessFirst, ProcessSecond, r1).x_1,
    ProcessFirst(First, Second, ProcessSecond, r1, r2).NONE,
    ProcessSecond(First, Second, ProcessFirst, r1, r2).NONE,

    First.ProcessFirst.START_FROM_INIT,
    Second.ProcessSecond.START_FROM_INIT,
}.