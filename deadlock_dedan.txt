#DEFINE N 2

server: res1(agents A[N]:A; servers ProcessFirst, ProcessSecond, res2),
services {
    CALL_Lock_FROM_ProcessFirst,
    EXEC_SI64EI69SL3SC27EL3EC32_FROM_ProcessFirst,
    EXEC_SI71EI81SL3SC34EL3EC44_FROM_ProcessFirst,
    CALL_Lock_FROM_ProcessSecond,
    EXEC_SI64EI69SL3SC27EL3EC32_FROM_ProcessSecond,
    EXEC_SI71EI81SL3SC34EL3EC44_FROM_ProcessSecond,
    CALL_Unlock_FROM_ProcessFirst,
    EXEC_SI114EI119SL4SC29EL4EC34_FROM_ProcessFirst,
    EXEC_SI121EI131SL4SC36EL4EC46_FROM_ProcessFirst,
    CALL_Unlock_FROM_ProcessSecond,
    EXEC_SI114EI119SL4SC29EL4EC34_FROM_ProcessSecond,
    EXEC_SI121EI131SL4SC36EL4EC46_FROM_ProcessSecond
},
states {
    a_0,
    a_0_FROM_ProcessFirst_PRE_SI64EI69SL3SC27EL3EC32,
    a_1_FROM_ProcessFirst_PRE_SI71EI81SL3SC34EL3EC44,
    a_1,
    a_0_FROM_ProcessSecond_PRE_SI64EI69SL3SC27EL3EC32,
    a_1_FROM_ProcessSecond_PRE_SI71EI81SL3SC34EL3EC44,
    a_1_FROM_ProcessFirst_PRE_SI114EI119SL4SC29EL4EC34,
    a_0_FROM_ProcessFirst_PRE_SI121EI131SL4SC36EL4EC46,
    a_1_FROM_ProcessSecond_PRE_SI114EI119SL4SC29EL4EC34,
    a_0_FROM_ProcessSecond_PRE_SI121EI131SL4SC36EL4EC46
},
actions {
    <j=1..N>{A[j].res1.CALL_Lock_FROM_ProcessFirst, res1.a_0} -> {A[j].res1.EXEC_SI64EI69SL3SC27EL3EC32_FROM_ProcessFirst, res1.a_0_FROM_ProcessFirst_PRE_SI64EI69SL3SC27EL3EC32},
    <j=1..N>{A[j].res1.EXEC_SI64EI69SL3SC27EL3EC32_FROM_ProcessFirst, res1.a_0_FROM_ProcessFirst_PRE_SI64EI69SL3SC27EL3EC32} -> {A[j].res1.EXEC_SI71EI81SL3SC34EL3EC44_FROM_ProcessFirst, res1.a_1_FROM_ProcessFirst_PRE_SI71EI81SL3SC34EL3EC44},
    <j=1..N>{A[j].res1.EXEC_SI71EI81SL3SC34EL3EC44_FROM_ProcessFirst, res1.a_1_FROM_ProcessFirst_PRE_SI71EI81SL3SC34EL3EC44} -> {A[j].ProcessFirst.RETURN_ok, res1.a_1},
    <j=1..N>{A[j].res1.CALL_Lock_FROM_ProcessSecond, res1.a_0} -> {A[j].res1.EXEC_SI64EI69SL3SC27EL3EC32_FROM_ProcessSecond, res1.a_0_FROM_ProcessSecond_PRE_SI64EI69SL3SC27EL3EC32},
    <j=1..N>{A[j].res1.EXEC_SI64EI69SL3SC27EL3EC32_FROM_ProcessSecond, res1.a_0_FROM_ProcessSecond_PRE_SI64EI69SL3SC27EL3EC32} -> {A[j].res1.EXEC_SI71EI81SL3SC34EL3EC44_FROM_ProcessSecond, res1.a_1_FROM_ProcessSecond_PRE_SI71EI81SL3SC34EL3EC44},
    <j=1..N>{A[j].res1.EXEC_SI71EI81SL3SC34EL3EC44_FROM_ProcessSecond, res1.a_1_FROM_ProcessSecond_PRE_SI71EI81SL3SC34EL3EC44} -> {A[j].ProcessSecond.RETURN_ok, res1.a_1},
    <j=1..N>{A[j].res1.CALL_Unlock_FROM_ProcessFirst, res1.a_1} -> {A[j].res1.EXEC_SI114EI119SL4SC29EL4EC34_FROM_ProcessFirst, res1.a_1_FROM_ProcessFirst_PRE_SI114EI119SL4SC29EL4EC34},
    <j=1..N>{A[j].res1.EXEC_SI114EI119SL4SC29EL4EC34_FROM_ProcessFirst, res1.a_1_FROM_ProcessFirst_PRE_SI114EI119SL4SC29EL4EC34} -> {A[j].res1.EXEC_SI121EI131SL4SC36EL4EC46_FROM_ProcessFirst, res1.a_0_FROM_ProcessFirst_PRE_SI121EI131SL4SC36EL4EC46},
    <j=1..N>{A[j].res1.EXEC_SI121EI131SL4SC36EL4EC46_FROM_ProcessFirst, res1.a_0_FROM_ProcessFirst_PRE_SI121EI131SL4SC36EL4EC46} -> {A[j].ProcessFirst.RETURN_ok, res1.a_0},
    <j=1..N>{A[j].res1.CALL_Unlock_FROM_ProcessSecond, res1.a_1} -> {A[j].res1.EXEC_SI114EI119SL4SC29EL4EC34_FROM_ProcessSecond, res1.a_1_FROM_ProcessSecond_PRE_SI114EI119SL4SC29EL4EC34},
    <j=1..N>{A[j].res1.EXEC_SI114EI119SL4SC29EL4EC34_FROM_ProcessSecond, res1.a_1_FROM_ProcessSecond_PRE_SI114EI119SL4SC29EL4EC34} -> {A[j].res1.EXEC_SI121EI131SL4SC36EL4EC46_FROM_ProcessSecond, res1.a_0_FROM_ProcessSecond_PRE_SI121EI131SL4SC36EL4EC46},
    <j=1..N>{A[j].res1.EXEC_SI121EI131SL4SC36EL4EC46_FROM_ProcessSecond, res1.a_0_FROM_ProcessSecond_PRE_SI121EI131SL4SC36EL4EC46} -> {A[j].ProcessSecond.RETURN_ok, res1.a_0}
};

server: res2(agents A[N]:A; servers ProcessFirst, ProcessSecond, res1),
services {
    CALL_Lock_FROM_ProcessFirst,
    EXEC_SI64EI69SL3SC27EL3EC32_FROM_ProcessFirst,
    EXEC_SI71EI81SL3SC34EL3EC44_FROM_ProcessFirst,
    CALL_Lock_FROM_ProcessSecond,
    EXEC_SI64EI69SL3SC27EL3EC32_FROM_ProcessSecond,
    EXEC_SI71EI81SL3SC34EL3EC44_FROM_ProcessSecond,
    CALL_Unlock_FROM_ProcessFirst,
    EXEC_SI114EI119SL4SC29EL4EC34_FROM_ProcessFirst,
    EXEC_SI121EI131SL4SC36EL4EC46_FROM_ProcessFirst,
    CALL_Unlock_FROM_ProcessSecond,
    EXEC_SI114EI119SL4SC29EL4EC34_FROM_ProcessSecond,
    EXEC_SI121EI131SL4SC36EL4EC46_FROM_ProcessSecond
},
states {
    a_0,
    a_0_FROM_ProcessFirst_PRE_SI64EI69SL3SC27EL3EC32,
    a_1_FROM_ProcessFirst_PRE_SI71EI81SL3SC34EL3EC44,
    a_1,
    a_0_FROM_ProcessSecond_PRE_SI64EI69SL3SC27EL3EC32,
    a_1_FROM_ProcessSecond_PRE_SI71EI81SL3SC34EL3EC44,
    a_1_FROM_ProcessFirst_PRE_SI114EI119SL4SC29EL4EC34,
    a_0_FROM_ProcessFirst_PRE_SI121EI131SL4SC36EL4EC46,
    a_1_FROM_ProcessSecond_PRE_SI114EI119SL4SC29EL4EC34,
    a_0_FROM_ProcessSecond_PRE_SI121EI131SL4SC36EL4EC46
},
actions {
    <j=1..N>{A[j].res2.CALL_Lock_FROM_ProcessFirst, res2.a_0} -> {A[j].res2.EXEC_SI64EI69SL3SC27EL3EC32_FROM_ProcessFirst, res2.a_0_FROM_ProcessFirst_PRE_SI64EI69SL3SC27EL3EC32},
    <j=1..N>{A[j].res2.EXEC_SI64EI69SL3SC27EL3EC32_FROM_ProcessFirst, res2.a_0_FROM_ProcessFirst_PRE_SI64EI69SL3SC27EL3EC32} -> {A[j].res2.EXEC_SI71EI81SL3SC34EL3EC44_FROM_ProcessFirst, res2.a_1_FROM_ProcessFirst_PRE_SI71EI81SL3SC34EL3EC44},
    <j=1..N>{A[j].res2.EXEC_SI71EI81SL3SC34EL3EC44_FROM_ProcessFirst, res2.a_1_FROM_ProcessFirst_PRE_SI71EI81SL3SC34EL3EC44} -> {A[j].ProcessFirst.RETURN_ok, res2.a_1},
    <j=1..N>{A[j].res2.CALL_Lock_FROM_ProcessSecond, res2.a_0} -> {A[j].res2.EXEC_SI64EI69SL3SC27EL3EC32_FROM_ProcessSecond, res2.a_0_FROM_ProcessSecond_PRE_SI64EI69SL3SC27EL3EC32},
    <j=1..N>{A[j].res2.EXEC_SI64EI69SL3SC27EL3EC32_FROM_ProcessSecond, res2.a_0_FROM_ProcessSecond_PRE_SI64EI69SL3SC27EL3EC32} -> {A[j].res2.EXEC_SI71EI81SL3SC34EL3EC44_FROM_ProcessSecond, res2.a_1_FROM_ProcessSecond_PRE_SI71EI81SL3SC34EL3EC44},
    <j=1..N>{A[j].res2.EXEC_SI71EI81SL3SC34EL3EC44_FROM_ProcessSecond, res2.a_1_FROM_ProcessSecond_PRE_SI71EI81SL3SC34EL3EC44} -> {A[j].ProcessSecond.RETURN_ok, res2.a_1},
    <j=1..N>{A[j].res2.CALL_Unlock_FROM_ProcessFirst, res2.a_1} -> {A[j].res2.EXEC_SI114EI119SL4SC29EL4EC34_FROM_ProcessFirst, res2.a_1_FROM_ProcessFirst_PRE_SI114EI119SL4SC29EL4EC34},
    <j=1..N>{A[j].res2.EXEC_SI114EI119SL4SC29EL4EC34_FROM_ProcessFirst, res2.a_1_FROM_ProcessFirst_PRE_SI114EI119SL4SC29EL4EC34} -> {A[j].res2.EXEC_SI121EI131SL4SC36EL4EC46_FROM_ProcessFirst, res2.a_0_FROM_ProcessFirst_PRE_SI121EI131SL4SC36EL4EC46},
    <j=1..N>{A[j].res2.EXEC_SI121EI131SL4SC36EL4EC46_FROM_ProcessFirst, res2.a_0_FROM_ProcessFirst_PRE_SI121EI131SL4SC36EL4EC46} -> {A[j].ProcessFirst.RETURN_ok, res2.a_0},
    <j=1..N>{A[j].res2.CALL_Unlock_FROM_ProcessSecond, res2.a_1} -> {A[j].res2.EXEC_SI114EI119SL4SC29EL4EC34_FROM_ProcessSecond, res2.a_1_FROM_ProcessSecond_PRE_SI114EI119SL4SC29EL4EC34},
    <j=1..N>{A[j].res2.EXEC_SI114EI119SL4SC29EL4EC34_FROM_ProcessSecond, res2.a_1_FROM_ProcessSecond_PRE_SI114EI119SL4SC29EL4EC34} -> {A[j].res2.EXEC_SI121EI131SL4SC36EL4EC46_FROM_ProcessSecond, res2.a_0_FROM_ProcessSecond_PRE_SI121EI131SL4SC36EL4EC46},
    <j=1..N>{A[j].res2.EXEC_SI121EI131SL4SC36EL4EC46_FROM_ProcessSecond, res2.a_0_FROM_ProcessSecond_PRE_SI121EI131SL4SC36EL4EC46} -> {A[j].ProcessSecond.RETURN_ok, res2.a_0}
};

server: ProcessFirst(agents A[N]:A; servers ProcessSecond, res1, res2),
services {
    START_FROM_INIT,
    EXEC_SI225EI228SL11SC4EL11EC4_FROM_INIT,
    EXEC_SI240EI251SL12SC8EL12EC19_FROM_INIT,
    RETURN_ok,
    EXEC_SI261EI272SL13SC8EL13EC19_FROM_INIT,
    EXEC_SI282EI295SL14SC8EL14EC21_FROM_INIT,
    EXEC_SI305EI318SL15SC8EL15EC21_FROM_INIT
},
states {
    NONE,
    NONE_FROM_INIT_PRE_SI225EI228SL11SC4EL11EC4,
    NONE_FROM_INIT_PRE_SI225EI228SL11SC4EL11EC4,
    NONE_FROM_INIT_PRE_SI240EI251SL12SC8EL12EC19,
    NONE_FROM_INIT_AT_SI240EI251SL12SC8EL12EC19,
    NONE_FROM_INIT_PRE_SI261EI272SL13SC8EL13EC19,
    NONE_FROM_INIT_AT_SI261EI272SL13SC8EL13EC19,
    NONE_FROM_INIT_PRE_SI282EI295SL14SC8EL14EC21,
    NONE_FROM_INIT_AT_SI282EI295SL14SC8EL14EC21,
    NONE_FROM_INIT_PRE_SI305EI318SL15SC8EL15EC21,
    NONE_FROM_INIT_AT_SI305EI318SL15SC8EL15EC21
},
actions {
    <j=1..N>{A[j].ProcessFirst.START_FROM_INIT, ProcessFirst.NONE} -> {A[j].ProcessFirst.EXEC_SI225EI228SL11SC4EL11EC4_FROM_INIT, ProcessFirst.NONE_FROM_INIT_PRE_SI225EI228SL11SC4EL11EC4},
    <j=1..N>{A[j].ProcessFirst.EXEC_SI225EI228SL11SC4EL11EC4_FROM_INIT, ProcessFirst.NONE_FROM_INIT_PRE_SI225EI228SL11SC4EL11EC4} -> {A[j].ProcessFirst.EXEC_SI225EI228SL11SC4EL11EC4_FROM_INIT, ProcessFirst.NONE_FROM_INIT_PRE_SI225EI228SL11SC4EL11EC4},
    <j=1..N>{A[j].ProcessFirst.EXEC_SI225EI228SL11SC4EL11EC4_FROM_INIT, ProcessFirst.NONE_FROM_INIT_PRE_SI225EI228SL11SC4EL11EC4} -> {A[j].ProcessFirst.EXEC_SI240EI251SL12SC8EL12EC19_FROM_INIT, ProcessFirst.NONE_FROM_INIT_PRE_SI240EI251SL12SC8EL12EC19},
    <j=1..N>{A[j].ProcessFirst.EXEC_SI240EI251SL12SC8EL12EC19_FROM_INIT, ProcessFirst.NONE_FROM_INIT_PRE_SI240EI251SL12SC8EL12EC19} -> {A[j].res1.CALL_Lock_FROM_ProcessFirst, ProcessFirst.NONE_FROM_INIT_AT_SI240EI251SL12SC8EL12EC19},
    <j=1..N>{A[j].ProcessFirst.RETURN_ok, ProcessFirst.NONE_FROM_INIT_AT_SI240EI251SL12SC8EL12EC19} -> {A[j].ProcessFirst.EXEC_SI261EI272SL13SC8EL13EC19_FROM_INIT, ProcessFirst.NONE_FROM_INIT_PRE_SI261EI272SL13SC8EL13EC19},
    <j=1..N>{A[j].ProcessFirst.EXEC_SI261EI272SL13SC8EL13EC19_FROM_INIT, ProcessFirst.NONE_FROM_INIT_PRE_SI261EI272SL13SC8EL13EC19} -> {A[j].res2.CALL_Lock_FROM_ProcessFirst, ProcessFirst.NONE_FROM_INIT_AT_SI261EI272SL13SC8EL13EC19},
    <j=1..N>{A[j].ProcessFirst.RETURN_ok, ProcessFirst.NONE_FROM_INIT_AT_SI261EI272SL13SC8EL13EC19} -> {A[j].ProcessFirst.EXEC_SI282EI295SL14SC8EL14EC21_FROM_INIT, ProcessFirst.NONE_FROM_INIT_PRE_SI282EI295SL14SC8EL14EC21},
    <j=1..N>{A[j].ProcessFirst.EXEC_SI282EI295SL14SC8EL14EC21_FROM_INIT, ProcessFirst.NONE_FROM_INIT_PRE_SI282EI295SL14SC8EL14EC21} -> {A[j].res2.CALL_Unlock_FROM_ProcessFirst, ProcessFirst.NONE_FROM_INIT_AT_SI282EI295SL14SC8EL14EC21},
    <j=1..N>{A[j].ProcessFirst.RETURN_ok, ProcessFirst.NONE_FROM_INIT_AT_SI282EI295SL14SC8EL14EC21} -> {A[j].ProcessFirst.EXEC_SI305EI318SL15SC8EL15EC21_FROM_INIT, ProcessFirst.NONE_FROM_INIT_PRE_SI305EI318SL15SC8EL15EC21},
    <j=1..N>{A[j].ProcessFirst.EXEC_SI305EI318SL15SC8EL15EC21_FROM_INIT, ProcessFirst.NONE_FROM_INIT_PRE_SI305EI318SL15SC8EL15EC21} -> {A[j].res1.CALL_Unlock_FROM_ProcessFirst, ProcessFirst.NONE_FROM_INIT_AT_SI305EI318SL15SC8EL15EC21},
    <j=1..N>{A[j].ProcessFirst.RETURN_ok, ProcessFirst.NONE_FROM_INIT_AT_SI305EI318SL15SC8EL15EC21} -> {A[j].ProcessFirst.EXEC_SI225EI228SL11SC4EL11EC4_FROM_INIT, ProcessFirst.NONE_FROM_INIT_PRE_SI225EI228SL11SC4EL11EC4}
};

server: ProcessSecond(agents A[N]:A; servers ProcessFirst, res1, res2),
services {
    START_FROM_INIT,
    EXEC_SI350EI353SL20SC4EL20EC4_FROM_INIT,
    EXEC_SI365EI376SL21SC8EL21EC19_FROM_INIT,
    RETURN_ok,
    EXEC_SI386EI397SL22SC8EL22EC19_FROM_INIT,
    EXEC_SI407EI420SL23SC8EL23EC21_FROM_INIT,
    EXEC_SI430EI443SL24SC8EL24EC21_FROM_INIT
},
states {
    NONE,
    NONE_FROM_INIT_PRE_SI350EI353SL20SC4EL20EC4,
    NONE_FROM_INIT_PRE_SI350EI353SL20SC4EL20EC4,
    NONE_FROM_INIT_PRE_SI365EI376SL21SC8EL21EC19,
    NONE_FROM_INIT_AT_SI365EI376SL21SC8EL21EC19,
    NONE_FROM_INIT_PRE_SI386EI397SL22SC8EL22EC19,
    NONE_FROM_INIT_AT_SI386EI397SL22SC8EL22EC19,
    NONE_FROM_INIT_PRE_SI407EI420SL23SC8EL23EC21,
    NONE_FROM_INIT_AT_SI407EI420SL23SC8EL23EC21,
    NONE_FROM_INIT_PRE_SI430EI443SL24SC8EL24EC21,
    NONE_FROM_INIT_AT_SI430EI443SL24SC8EL24EC21
},
actions {
    <j=1..N>{A[j].ProcessSecond.START_FROM_INIT, ProcessSecond.NONE} -> {A[j].ProcessSecond.EXEC_SI350EI353SL20SC4EL20EC4_FROM_INIT, ProcessSecond.NONE_FROM_INIT_PRE_SI350EI353SL20SC4EL20EC4},
    <j=1..N>{A[j].ProcessSecond.EXEC_SI350EI353SL20SC4EL20EC4_FROM_INIT, ProcessSecond.NONE_FROM_INIT_PRE_SI350EI353SL20SC4EL20EC4} -> {A[j].ProcessSecond.EXEC_SI350EI353SL20SC4EL20EC4_FROM_INIT, ProcessSecond.NONE_FROM_INIT_PRE_SI350EI353SL20SC4EL20EC4},
    <j=1..N>{A[j].ProcessSecond.EXEC_SI350EI353SL20SC4EL20EC4_FROM_INIT, ProcessSecond.NONE_FROM_INIT_PRE_SI350EI353SL20SC4EL20EC4} -> {A[j].ProcessSecond.EXEC_SI365EI376SL21SC8EL21EC19_FROM_INIT, ProcessSecond.NONE_FROM_INIT_PRE_SI365EI376SL21SC8EL21EC19},
    <j=1..N>{A[j].ProcessSecond.EXEC_SI365EI376SL21SC8EL21EC19_FROM_INIT, ProcessSecond.NONE_FROM_INIT_PRE_SI365EI376SL21SC8EL21EC19} -> {A[j].res2.CALL_Lock_FROM_ProcessSecond, ProcessSecond.NONE_FROM_INIT_AT_SI365EI376SL21SC8EL21EC19},
    <j=1..N>{A[j].ProcessSecond.RETURN_ok, ProcessSecond.NONE_FROM_INIT_AT_SI365EI376SL21SC8EL21EC19} -> {A[j].ProcessSecond.EXEC_SI386EI397SL22SC8EL22EC19_FROM_INIT, ProcessSecond.NONE_FROM_INIT_PRE_SI386EI397SL22SC8EL22EC19},
    <j=1..N>{A[j].ProcessSecond.EXEC_SI386EI397SL22SC8EL22EC19_FROM_INIT, ProcessSecond.NONE_FROM_INIT_PRE_SI386EI397SL22SC8EL22EC19} -> {A[j].res1.CALL_Lock_FROM_ProcessSecond, ProcessSecond.NONE_FROM_INIT_AT_SI386EI397SL22SC8EL22EC19},
    <j=1..N>{A[j].ProcessSecond.RETURN_ok, ProcessSecond.NONE_FROM_INIT_AT_SI386EI397SL22SC8EL22EC19} -> {A[j].ProcessSecond.EXEC_SI407EI420SL23SC8EL23EC21_FROM_INIT, ProcessSecond.NONE_FROM_INIT_PRE_SI407EI420SL23SC8EL23EC21},
    <j=1..N>{A[j].ProcessSecond.EXEC_SI407EI420SL23SC8EL23EC21_FROM_INIT, ProcessSecond.NONE_FROM_INIT_PRE_SI407EI420SL23SC8EL23EC21} -> {A[j].res1.CALL_Unlock_FROM_ProcessSecond, ProcessSecond.NONE_FROM_INIT_AT_SI407EI420SL23SC8EL23EC21},
    <j=1..N>{A[j].ProcessSecond.RETURN_ok, ProcessSecond.NONE_FROM_INIT_AT_SI407EI420SL23SC8EL23EC21} -> {A[j].ProcessSecond.EXEC_SI430EI443SL24SC8EL24EC21_FROM_INIT, ProcessSecond.NONE_FROM_INIT_PRE_SI430EI443SL24SC8EL24EC21},
    <j=1..N>{A[j].ProcessSecond.EXEC_SI430EI443SL24SC8EL24EC21_FROM_INIT, ProcessSecond.NONE_FROM_INIT_PRE_SI430EI443SL24SC8EL24EC21} -> {A[j].res2.CALL_Unlock_FROM_ProcessSecond, ProcessSecond.NONE_FROM_INIT_AT_SI430EI443SL24SC8EL24EC21},
    <j=1..N>{A[j].ProcessSecond.RETURN_ok, ProcessSecond.NONE_FROM_INIT_AT_SI430EI443SL24SC8EL24EC21} -> {A[j].ProcessSecond.EXEC_SI350EI353SL20SC4EL20EC4_FROM_INIT, ProcessSecond.NONE_FROM_INIT_PRE_SI350EI353SL20SC4EL20EC4}
};

agents First, Second;
servers res1, res2, ProcessFirst, ProcessSecond;

init -> {
    res1(First, Second, ProcessFirst, ProcessSecond, res2).a_0,
    res2(First, Second, ProcessFirst, ProcessSecond, res1).a_0,
    ProcessFirst(First, Second, ProcessSecond, res1, res2).NONE,
    ProcessSecond(First, Second, ProcessFirst, res1, res2).NONE,

    First.ProcessFirst.START_FROM_INIT,
    Second.ProcessSecond.START_FROM_INIT,
}.